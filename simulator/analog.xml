<?xml version="1.0" encoding="utf-8"?>
<module xmlns="http://www.kinoma.com/kpr/1">

	<require path="PinsSimulators" id="PinsSimulators"/>

	<function id="configure" params="configuration"><![CDATA[
		this.pinsSimulator = shell.delegate("addSimulatorPart", {
			header : { 
				label : "Laundry Machine Sensors", 
				name : "Analog Input", 
				iconVariant : PinsSimulators.SENSOR_KNOB 
			},
			axes : [
				new PinsSimulators.AnalogInputAxisDescription(
					{
						valueLabel : "Time Remaining",
						valueID : "analogValue",
						defaultControl : PinsSimulators.SLIDER,
						value : 0.5
					}
				), 
				new PinsSimulators.AnalogOutputAxisDescription(
					{
						valueLabel : "Analog Output",
						valueID : "analogValue2"
					}
				),
				new PinsSimulators.DigitalInputAxisDescription(
					{
						valueLabel : "Boolean Input",
						valueID : "buttonValue"
					}
				),			
			]
		});
	]]></function>

	<function id="close"><![CDATA[
		shell.delegate("removeSimulatorPart", this.pinsSimulator);
	]]></function>

	<function id="read"><![CDATA[
		return this.pinsSimulator.delegate("getValue");		
	]]></function>
	
	<function id="changeValue" params="result"><![CDATA[
		this.pinsSimulator.delegate("setValue", "analogValue2", result.value);
		var readResult = this.pinsSimulator.delegate("getValue");
		trace("Read result: " + readResult.analogValue2);
	]]></function>	

	<script><![CDATA[
		exports.pins = {
			analog: { type: "A2D" },
			analog2: { type: "A2D" },
			button: { type: "Digital", direction: "input" }
		};
	]]></script>

</module>